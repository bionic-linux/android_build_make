{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d7a5bcfd_9a123d3f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1058860
      },
      "writtenOn": "2024-06-12T17:15:08Z",
      "side": 1,
      "message": "This CL doesn\u0027t change any interaction with clang/llvm APIs.  I\u0027ll defer to kadircet and ialiyev to review the protobuf changes.",
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1155625e_93e32e8e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 3276774
      },
      "writtenOn": "2024-06-13T09:29:50Z",
      "side": 1,
      "message": "as discussed offline, this is somewhat of a risky change, right before some rollouts we\u0027re planning to have internally.\n\nlet\u0027s wait for couple weeks until that launch sticks, so that we can land this change without disturbance.",
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8ff24de_f2dd3b21",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 3276774
      },
      "writtenOn": "2024-06-18T14:42:20Z",
      "side": 1,
      "message": "LG from cc_analyzer perspective. I\u0027ve some concerns about the general shape of the new ide_query proto, especially about the way we\u0027re limiting the working_dir (i believe the rest is just introducing some edges between different results, which i think is required by Java people and no-op for C++ services).\n\nI think it\u0027d be nice to not have that limitation around working_dir, as it might bite us when onboarding more projects with complicated build setups.",
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2a62f4f9_8b4a8058",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 3288188
      },
      "writtenOn": "2024-06-27T07:14:14Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "c8ff24de_f2dd3b21",
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "240cf98b_0eede8b9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 3288188
      },
      "writtenOn": "2024-06-27T07:30:39Z",
      "side": 1,
      "message": "@pirama@google.com can you please take a look? Thanks\n\nKadir is currently OOO but he\u0027s fine with CC related changes (see comment).",
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "06c2a029_5aaa5f86",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 3276774
      },
      "writtenOn": "2024-07-10T13:50:21Z",
      "side": 1,
      "message": "thanks!",
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b36d0b00_2bccde7b",
        "filename": "tools/ide_query/ide_query.go",
        "patchSetId": 6
      },
      "lineNbr": 304,
      "author": {
        "id": 2066167
      },
      "writtenOn": "2024-06-19T12:51:37Z",
      "side": 1,
      "message": "(opt) consider inverting the loop to reduce from n^4 to n^3:\nfor _, p :\u003d range paths {\n  for name, module :\u003d range modules {\n    if slices.Contains(module.Srcs, p) {\n      ...\n    }\n  }\n}",
      "range": {
        "startLine": 304,
        "startChar": 4,
        "endLine": 304,
        "endChar": 45
      },
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ee280a15_5266354a",
        "filename": "tools/ide_query/ide_query.go",
        "patchSetId": 6
      },
      "lineNbr": 304,
      "author": {
        "id": 2066167
      },
      "writtenOn": "2024-06-19T12:53:31Z",
      "side": 1,
      "message": "Sorry, I see that runtime is n^3 because of the break after it. Up to you.",
      "parentUuid": "b36d0b00_2bccde7b",
      "range": {
        "startLine": 304,
        "startChar": 4,
        "endLine": 304,
        "endChar": 45
      },
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1ed4fabe_bd2b7e75",
        "filename": "tools/ide_query/ide_query.go",
        "patchSetId": 6
      },
      "lineNbr": 304,
      "author": {
        "id": 2066167
      },
      "writtenOn": "2024-06-19T13:00:30Z",
      "side": 1,
      "message": "I don\u0027t know the sizes of the inputs. It could make sense to create a map for paths for the quick Contains check.",
      "parentUuid": "ee280a15_5266354a",
      "range": {
        "startLine": 304,
        "startChar": 4,
        "endLine": 304,
        "endChar": 45
      },
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ee486b85_0e6ac699",
        "filename": "tools/ide_query/ide_query.go",
        "patchSetId": 6
      },
      "lineNbr": 304,
      "author": {
        "id": 3288188
      },
      "writtenOn": "2024-06-27T07:14:14Z",
      "side": 1,
      "message": "Good point, len(paths) is usually very small. ~1-2 so that should be fine. But we can improve this later after the proto changes are submitted.",
      "parentUuid": "1ed4fabe_bd2b7e75",
      "range": {
        "startLine": 304,
        "startChar": 4,
        "endLine": 304,
        "endChar": 45
      },
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5165c982_81e006bd",
        "filename": "tools/ide_query/ide_query_proto/ide_query.proto",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 3276774
      },
      "writtenOn": "2024-06-18T14:42:20Z",
      "side": 1,
      "message": "why are we renaming from `build_artifact_root` ?",
      "fixSuggestions": [
        {
          "fixId": "49ed38ce_1cf99294",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "tools/ide_query/ide_query_proto/ide_query.proto",
              "range": {
                "startLine": 34,
                "startChar": 0,
                "endLine": 35,
                "endChar": 0
              },
              "replacement": "  string build_artifact_root \u003d 1;\n"
            }
          ]
        }
      ],
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c70f7146_4dca8ef7",
        "filename": "tools/ide_query/ide_query_proto/ide_query.proto",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 3288188
      },
      "writtenOn": "2024-06-27T07:14:14Z",
      "side": 1,
      "message": "I don\u0027t remember if there was an explicit ask to rename this when we updated the format. I think too make it more consistent with the name `working_dir`.",
      "parentUuid": "5165c982_81e006bd",
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bfc38f62_ed2bb298",
        "filename": "tools/ide_query/ide_query_proto/ide_query.proto",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 3276774
      },
      "writtenOn": "2024-06-18T14:42:20Z",
      "side": 1,
      "message": "it isn\u0027t guaranteed that all the build actions will be run from the same directory. hence this was per-source-file to make sure we can support such actions in the future. any reason for putting this limitation into the design now?",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 37,
        "endChar": 25
      },
      "fixSuggestions": [
        {
          "fixId": "005725f1_04fac3e5",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "tools/ide_query/ide_query_proto/ide_query.proto",
              "range": {
                "startLine": 35,
                "startChar": 0,
                "endLine": 38,
                "endChar": 0
              },
              "replacement": ""
            },
            {
              "path": "tools/ide_query/ide_query_proto/ide_query.proto",
              "range": {
                "startLine": 45,
                "startChar": 0,
                "endLine": 46,
                "endChar": 0
              },
              "replacement": "  reserved 2, 3, 4;\n"
            },
            {
              "path": "tools/ide_query/ide_query_proto/ide_query.proto",
              "range": {
                "startLine": 97,
                "startChar": 0,
                "endLine": 98,
                "endChar": 0
              },
              "replacement": "  // Path to the file relative to repository root.\n"
            }
          ]
        }
      ],
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "acf4b773_6a54499d",
        "filename": "tools/ide_query/ide_query_proto/ide_query.proto",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 3288188
      },
      "writtenOn": "2024-06-27T07:14:14Z",
      "side": 1,
      "message": "When we iterated on the new format I checked that all consumers use a single directory. If we have a use-case we can move this back or add an overwrite field in the AnalysisResult.",
      "parentUuid": "bfc38f62_ed2bb298",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 37,
        "endChar": 25
      },
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7e7a2df2_53826332",
        "filename": "tools/ide_query/ide_query_proto/ide_query.proto",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 3276774
      },
      "writtenOn": "2024-07-10T13:50:21Z",
      "side": 1,
      "message": "it\u0027s unfortunate that we\u0027re taking that away, and creating work for the future. but if you think that\u0027s fine i don\u0027t think it\u0027s worth blocking the CL.",
      "parentUuid": "acf4b773_6a54499d",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 37,
        "endChar": 25
      },
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "13ba70c4_cc0b2ba4",
        "filename": "tools/ide_query/ide_query_proto/ide_query.proto",
        "patchSetId": 6
      },
      "lineNbr": 37,
      "author": {
        "id": 3288188
      },
      "writtenOn": "2024-07-10T14:31:18Z",
      "side": 1,
      "message": "I agree that this is not optimal, but I\u0027ll do that change upstream first.",
      "parentUuid": "7e7a2df2_53826332",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 37,
        "endChar": 25
      },
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bd98f42b_807729ae",
        "filename": "tools/ide_query/ide_query_proto/ide_query.proto",
        "patchSetId": 6
      },
      "lineNbr": 67,
      "author": {
        "id": 3276774
      },
      "writtenOn": "2024-06-18T14:42:20Z",
      "side": 1,
      "message": "it feels like we can either get rid of this or `AnalysisEror`",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 67,
        "endChar": 3
      },
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "65b0a463_48463e01",
        "filename": "tools/ide_query/ide_query_proto/ide_query.proto",
        "patchSetId": 6
      },
      "lineNbr": 67,
      "author": {
        "id": 3288188
      },
      "writtenOn": "2024-06-27T07:14:14Z",
      "side": 1,
      "message": "The `AnalysisError` represents a hard error in the build system. Initially we modelled this just a simple string but Soong could provide more details so we decided to use are message as well.",
      "parentUuid": "bd98f42b_807729ae",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 67,
        "endChar": 3
      },
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f71619b8_6104c0d1",
        "filename": "tools/ide_query/ide_query_proto/ide_query.proto",
        "patchSetId": 6
      },
      "lineNbr": 75,
      "author": {
        "id": 3276774
      },
      "writtenOn": "2024-06-18T14:42:20Z",
      "side": 1,
      "message": "i guess this makes sense for C++ to be at this level, but wouldn\u0027t it make more sense to push this into `BuildableUnit`s ? IIRC, we went with this kind of separation because there can be `BuildableUnit`s that are not relevant to source in question directly, but can be used to speed up warmups for further files from the same package later on. In such a world we don\u0027t have an `AnalysisResult` associated with that file but we actually have some `BuildableUnit`s that we can use.",
      "range": {
        "startLine": 74,
        "startChar": 0,
        "endLine": 75,
        "endChar": 32
      },
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b55ac126_e091378c",
        "filename": "tools/ide_query/ide_query_proto/ide_query.proto",
        "patchSetId": 6
      },
      "lineNbr": 75,
      "author": {
        "id": 3288188
      },
      "writtenOn": "2024-06-27T07:14:14Z",
      "side": 1,
      "message": "The invalidations just contain files or directories that change in build graph and hence invalide the result. All sources of generated files should part of `source_file_paths` in the `BuildableUnit`.",
      "parentUuid": "f71619b8_6104c0d1",
      "range": {
        "startLine": 74,
        "startChar": 0,
        "endLine": 75,
        "endChar": 32
      },
      "revId": "86cca7484c0da7a17d9a61ebc8c59e2fd0721da7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}